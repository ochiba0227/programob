extends layout

block content
  div(ng-app="entryApp" ng-controller="entryController" class="container")
    h2 #{title}
    div(class="row")
      div(class="col-lg-12")
        form(id="entryForm" ng-submit="addEntry()")
          div(class="form-group" id="userName")
            label(for="user") ユーザ名
            select(class="form-control selectpicker" multiple id="user" ng-model="user" ng-options="u.userName for u in users" required)
              option(value="") -選択してください-
          div(class="form-group")
            label(for="entryTime") エントリータイム
            input(type="text" class="form-control" id="entryTime" ng-model="entryTime" required)
          button(type="submit" class="btn btn-primary") エントリーを追加する
    
    div(class="row")
      div(class="col-lg-12")
        input(type="text" class="form-control" id="filterInput" ng-model="filterInput")
        div(class="table-responsive")
          table(st-table="rowCollection" class="table table-striped table-bordered table-hover")
            thead
              tr
                th 選手
                th エントリータイム
            tbody
              tr(ng-repeat="row in rowCollection| filter:filterInput")
                td
                  span(ng-repeat="uid in row.entryData.userData") {{uid.userName}} 
                td {{formatDate(row.entryData.entryTime)}}
block scripts
  script.
    var programId = "#{id}";
    var isRelay = "#{isRelay}";
    var isAdmin = Boolean("#{isAdmin}");
  script(src='/controllers/entryController.js')
